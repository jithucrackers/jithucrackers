<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jithu Crackers - Order Form</title>
    <!-- jsPDF and AutoTable Libraries for PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 15px;
            background-color: #f4f4f4;
            line-height: 1.5;
        }
        .container {
            max-width: 1400px;
            margin: auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .header-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 15px;
            margin-bottom: 25px;
            background-color: #FFFDE7;
            border: 2px solid #FFC107;
            border-radius: 8px;
        }
        .company-info, .payment-info {
            flex: 1 1 100%;
            padding: 10px;
            text-align: center;
        }
        .company-info h1 { margin: 0; font-size: 2.4em; color: #D32F2F; }
        .company-info p { margin: 5px 0; font-size: 1.1em; font-weight: bold; }
        
        .payment-info {
            background-color: #ffffff;
            border: 1px solid #FFECB3;
            border-radius: 8px;
        }
        .payment-info h2 { margin-top: 0; font-size: 1.4em; color: #D32F2F; }
        .payment-info p { margin: 6px 0; font-size: 1em; font-weight: 500; text-align: left; padding-left: 15px;}
        .payment-info p strong { color: #555; }

        .form-details {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }
        .form-details label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-details input { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        
        .table-wrapper { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; table-layout: auto; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; word-wrap: break-word; }
        thead th { background-color: #f2f2f2; font-weight: bold; position: sticky; top: 0; z-index: 2; }
        .category-header { background-color: #e0e0e0; font-weight: bold; text-align: center !important; position: sticky; top: 45px; z-index: 1; }
        .quantity-input, .amount-output { width: 80px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; text-align: center; }
        .amount-output { background-color: #e9e9e9; font-weight: bold; }
        
        .bottom-controls { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 20px; margin-top: 20px; }
        .total-section { font-size: 1.6em; font-weight: bold; }
        #submitBtn { padding: 12px 25px; font-size: 16px; cursor: pointer; border: none; background-color: #28a745; color: white; border-radius: 5px; transition: background-color 0.3s; }
        #submitBtn:hover:not(:disabled) { background-color: #218838; }
        #submitBtn:disabled { background-color: #aaa; cursor: wait; }
        #submitStatus { font-weight: bold; text-align: right; flex-grow: 1; }

        @media (min-width: 768px) {
            .header-grid { flex-wrap: nowrap; }
            .company-info { text-align: left; }
            .payment-info { flex-basis: 450px; }
            .form-details { grid-template-columns: 1fr 1fr; }
        }
        @media (min-width: 1024px) {
            .form-details { grid-template-columns: 1fr 1fr 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-grid">
        <div class="company-info">
            <h1>Jithu Crackers</h1>
            <p>No.50, N S street, Sivakasi.</p>
            <p>QUALITY, QUANTITY & TRUST</p>
            <p>Phone No: 9952732777</p>
        </div>
        <div class="payment-info">
            <h2>Payment Details</h2>
            <p><strong>G pay or phone pe:</strong> 9952732777, 8220693192</p>
            <p><strong>Bank:</strong> State Bank Of India</p>
            <p><strong>Account Name:</strong> K Praveenkumar</p>
            <p><strong>Account No:</strong> 31492853796</p>
            <p><strong>Branch:</strong> Thiruthangal</p>
            <p><strong>IFS Code:</strong> SBIN0012767</p>
            <p><strong>MICR code:</strong> 626002025</p>
        </div>
    </div>

    <div class="form-details">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone" required>
        </div>
        <div class="form-group">
            <label for="address">Address:</label>
            <input type="text" id="address" name="address">
        </div>
        <div class="form-group">
            <label for="refBy">Ref. By:</label>
            <input type="text" id="refBy" name="refBy">
        </div>
         <div class="form-group">
            <label for="date">Date:</label>
            <input type="date" id="date" name="date">
        </div>
    </div>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>S.No.</th>
                    <th>NAME OF THE PRODUCTS</th>
                    <th>பொருள்களின் விபரம்</th>
                    <th>RATE</th>
                    <th>75% Discount RATE</th>
                    <th>PER</th>
                    <th>QUANTITY</th>
                    <th>AMOUNT</th>
                </tr>
            </thead>
            <tbody class="product-tbody">
                <tr><td colspan="8" class="category-header">SPARKLERS - கம்பி மத்தாப்பு</td></tr>
                <tr><td>1</td><td>7cm Electric Sparklers</td><td>7செமீ சாதா கம்பி</td><td>36.00</td><td class="rate">9.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>2</td><td>7cm Glitring Sparklers</td><td>7செமீ கிளிட்டரிங் கம்பி</td><td>41.00</td><td class="rate">10.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>3</td><td>7cm Green Sparklers</td><td>7செமீ பச்சை கம்பி</td><td>43.00</td><td class="rate">10.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>4</td><td>7cm Red Sparklers</td><td>7செமீ சிவப்பு கம்பி</td><td>45.00</td><td class="rate">11.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>5</td><td>10cm Electric Sparklers</td><td>10செமீ சாதா கம்பி</td><td>54.00</td><td class="rate">13.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>6</td><td>10cm Glitring Sparklers</td><td>10செமீ கிளிட்டரிங் கம்பி</td><td>59.00</td><td class="rate">14.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>7</td><td>10cm Green Sparklers</td><td>10செமீ பச்சை கம்பி</td><td>63.00</td><td class="rate">15.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>8</td><td>10cm Red Sparklers</td><td>10செமீ சிவப்பு கம்பி</td><td>68.00</td><td class="rate">17.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>10</td><td>12cm Electric Sparklers</td><td>12செமீ சாதா கம்பி</td><td>90.00</td><td class="rate">22.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>11</td><td>12cm Glitring Sparklers</td><td>12செமீ கிளிட்டரிங் கம்பி</td><td>96.00</td><td class="rate">24.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>12</td><td>12cm Green Sparklers</td><td>12செமீ பச்சை கம்பி</td><td>104.00</td><td class="rate">26.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>13</td><td>12cm Red Sparklers</td><td>12செமீ சிவப்பு கம்பி</td><td>113.00</td><td class="rate">28.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>14</td><td>15cm Electric Sparklers</td><td>15செமீ சாதா கம்பி</td><td>126.00</td><td class="rate">31.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>15</td><td>15cm Glitring Sparklers</td><td>15செமீ கிளிட்டரிங் கம்பி</td><td>150.00</td><td class="rate">37.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>16</td><td>15cm Green Sparklers</td><td>15செமீ பச்சை கம்பி</td><td>158.00</td><td class="rate">39.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>17</td><td>15cm Red Sparklers</td><td>15செமீ சிவப்பு கம்பி</td><td>171.00</td><td class="rate">42.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>19</td><td>30cm Electric Sparklers</td><td>30செமீ சாதா கம்பி</td><td>126.00</td><td class="rate">31.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>20</td><td>30cm Glitring Sparklers</td><td>30செமீ கிளிட்டரிங் கம்பி</td><td>150.00</td><td class="rate">37.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>21</td><td>30cm Green Sparklers</td><td>30செமீ பச்சை கம்பி</td><td>158.00</td><td class="rate">39.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>22</td><td>30cm Red Sparklers</td><td>30செமீ சிவப்பு கம்பி</td><td>171.00</td><td class="rate">42.75</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>23</td><td>50cm Electric Sparklers</td><td>50செமீ சாதா கம்பி</td><td>630.00</td><td class="rate">157.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>24</td><td>50cm Glitring Sparklers</td><td>50செமீ கிளிட்டரிங் கம்பி</td><td>810.00</td><td class="rate">202.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>25</td><td>50cm Green Sparklers</td><td>50செமீ பச்சை கம்பி</td><td>833.00</td><td class="rate">208.25</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>31</td><td>7cm 50-50 Sparklers (krishna)</td><td>7செமீ 50-50 (கிருஷ்ணா)</td><td>203.00</td><td class="rate">50.75</td><td>20 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>32</td><td>10cm Red Sparklers (krishna)</td><td>10செமீ சிவப்பு கம்பி (கிருஷ்ணா)</td><td>198.00</td><td class="rate">49.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>34</td><td>12cm Green Sparklers (krishna)</td><td>12செமீ பச்சை கம்பி (கிருஷ்ணா)</td><td>257.00</td><td class="rate">64.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>36</td><td>50cm Colour Sparklers (krishna)</td><td>50செமீ கலர் கம்பி (கிருஷ்ணா)</td><td>1058.00</td><td class="rate">264.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>38</td><td>7cm Titanium Gilitring Sparklers(asok)</td><td>7செமீ டைட்டேனியம் கிளிட்டரிங் கம்பி (கிருஷ்ணா)</td><td>86.00</td><td class="rate">21.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>39</td><td>7cm Green Sparklers (asok)</td><td>7செமீ பச்சை கம்பி (அசோக்)</td><td>90.00</td><td class="rate">22.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>40</td><td>10cm (asok) vicky Electric Sparklers</td><td>10செமீ விக்கி சாதா கம்பி (அசோக்)</td><td>108.00</td><td class="rate">27.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>41</td><td>10cm (asok) vicky Colour Sparklers</td><td>10செமீ விக்கி கலர் கம்பி (அசோக்)</td><td>117.00</td><td class="rate">29.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>42</td><td>10cm Green Sparklers (asok)</td><td>10செமீ பச்சை கம்பி (அசோக்)</td><td>126.00</td><td class="rate">31.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>43</td><td>10cm Sonata Gold (asok)</td><td>10செமீ சொனாட்டா கோல்டு (அசோக்)</td><td>180.00</td><td class="rate">45.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>44</td><td>10cm Orange Sparklers (asok)</td><td>10செமீ ஆரஞ்சு கம்பி (அசோக்)</td><td>180.00</td><td class="rate">45.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>45</td><td>10cm 5 In 1 Sparklers (asok)</td><td>10செமீ 5 இன் 1 கம்பி (அசோக்)</td><td>1125.00</td><td class="rate">281.25</td><td>1Pkt (50p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>46</td><td>12cm Electric Sparklers (asok)</td><td>12செமீ சாதா கம்பி (அசோக்)</td><td>169.00</td><td class="rate">42.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>47</td><td>12cm Giltring Sparklers (asok)</td><td>12செமீ கிளிட்டரிங் கம்பி (அசோக்)</td><td>225.00</td><td class="rate">56.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>48</td><td>12cm Green Sparklers (asok)</td><td>12செமீ பச்சை கம்பி (அசோக்)</td><td>225.00</td><td class="rate">56.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>49</td><td>12cm Twin-tone (asok)</td><td>12செமீ டுவின் டோன் (அசோக்)</td><td>228.00</td><td class="rate">57.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>50</td><td>15cm Electric Sparklers (asok)</td><td>15செமீ சாதா கம்பி (அசோக்)</td><td>302.00</td><td class="rate">75.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>51</td><td>15cm Green Sparklers (asok)</td><td>15செமீ பச்சை கம்பி (அசோக்)</td><td>380.00</td><td class="rate">95.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>52</td><td>30cm Electric Sparklers (asok)</td><td>30செமீ சாதா கம்பி (அசோக்)</td><td>304.00</td><td class="rate">76.00</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>53</td><td>30cm Green Sparklers (asok)</td><td>30செமீ பச்சை கம்பி (அசோக்)</td><td>369.00</td><td class="rate">92.25</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>54</td><td>30cm Glitring Sparklers (asok)</td><td>30செமீ கிளிட்டரிங் கம்பி (அசோக்)</td><td>338.00</td><td class="rate">84.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>55</td><td>30cm Red Sparklers (asok)</td><td>30செமீ சிவப்பு கம்பி (அசோக்)</td><td>409.00</td><td class="rate">102.25</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>56</td><td>50cm Electric Sparklers (asok)</td><td>50செமீ சாதா கம்பி (அசோக்)</td><td>855.00</td><td class="rate">213.75</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>57</td><td>50cm Giltring Sparklers (asok)</td><td>50செமீ கிளிட்டரிங் கம்பி (அசோக்)</td><td>990.00</td><td class="rate">247.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>58</td><td>50cm Mix Trix Sparklers (asok)</td><td>50செமீ மிக்ஸ் ட்ரிக்ஸ் (அசோக்)</td><td>990.00</td><td class="rate">247.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>59</td><td>75cm Giltring Sparklers (asok)</td><td>75செமீ கிளிட்டரிங் கம்பி (அசோக்)</td><td>1283.00</td><td class="rate">320.75</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>60</td><td>75cm Mix Trix Sparklers (asok)</td><td>75செமீ மிக்ஸ் ட்ரிக்ஸ் கம்பி (அசோக்)</td><td>1440.00</td><td class="rate">360.00</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>61</td><td>Rotating Sparklers (asok)</td><td>ரொட்டேட்டிங் கம்பி (அசோக்)</td><td>945.00</td><td class="rate">236.25</td><td>1 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>464</td><td>15cm 5in1 Wonder (asok)</td><td>15செமீ 5 இன் 1 ஒன்டர் (அசோக்)</td><td>2138.00</td><td class="rate">534.50</td><td>1 Pck(50p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>465</td><td>15cm Mayajal (asok)</td><td>15செமீ மாயா ஜால் (அசோக்)</td><td>450.00</td><td class="rate">112.50</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>494</td><td>30cm Millenimum Mix (asok)</td><td>30செமீ மில்லினியம் மிக்ஸ் (அசோக்)</td><td>405.00</td><td class="rate">101.25</td><td>1 Box(5p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>495</td><td>12cm Silver Drops (asok)</td><td>12செமீ சில்வர் ட்ராப்ஸ் (அசோக்)</td><td>279.00</td><td class="rate">69.75</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>521</td><td>12cm Red (krishna)</td><td>12செமீ சிவப்பு கம்பி (கிருஷ்ணா)</td><td>270.00</td><td class="rate">67.50</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>522</td><td>12cm Glittring (krishna)</td><td>12செமீ கிளிட்டரிங் கம்பி (கிருஷ்ணா)</td><td>225.00</td><td class="rate">56.25</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>526</td><td>15cm Red (asok)</td><td>15செமீ சிவப்பு கம்பி (அசோக்)</td><td>450.00</td><td class="rate">112.50</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>527</td><td>15cm Glittring (asok)</td><td>15செமீ கிளிட்டரிங் கம்பி (அசோக்)</td><td>428.00</td><td class="rate">107.00</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>542</td><td>75cm Electric (asok)</td><td>75செமீ சாதா கம்பி (அசோக்)</td><td>1193.00</td><td class="rate">298.25</td><td>1 Box(5p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td colspan="8" class="category-header">GROUND CHAKKAR - தரைச்சக்கரம்</td></tr>
                <tr><td>62</td><td>Ground Chakkar Big (10 Pce)</td><td>தரைச்சக்கரம் பிக் (10பீஸ்)</td><td>113.00</td><td class="rate">28.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>63</td><td>Ground Chakkar Big (25 Pce)</td><td>தரைச்சக்கரம் பிக் (25பீஸ்)</td><td>270.00</td><td class="rate">67.50</td><td>10pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>64</td><td>Ground Chakkar Special</td><td>தரைச்சக்கரம் ஸ்பெஷல்</td><td>225.00</td><td class="rate">56.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>436</td><td>Ground Chakkar Asoka</td><td>தரைச்சக்கரம் அசோகா</td><td>180.00</td><td class="rate">45.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>65</td><td>Ground Chakkar Deluxe</td><td>தரைச்சக்கரம் டீலக்ஸ்</td><td>405.00</td><td class="rate">101.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>548</td><td>Ground Chakkar Special (plastic)(regular)</td><td>தரைச்சக்கரம் ஸ்பெஷல் பிளாஸ்டிக் (ரெகுலர்)</td><td>293.00</td><td class="rate">73.25</td><td>10pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>547</td><td>Ground Chakkar Deluxe (plastic)(regular)</td><td>தரைச்சக்கரம் டீலக்ஸ் பிளாஸ்டிக் (ரெகுலர்)</td><td>540.00</td><td class="rate">135.00</td><td>10pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>66</td><td>Butterfly</td><td>பட்டர்ஃளை</td><td>270.00</td><td class="rate">67.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>67</td><td>Bambaram (regular)</td><td>பம்பரம்</td><td>540.00</td><td class="rate">135.00</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>68</td><td>Lotus Wheel (regular)</td><td>லோட்டஸ் வீல்</td><td>495.00</td><td class="rate">123.75</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>69</td><td>Disco Wheel</td><td>டிஸ்கோ வீல்</td><td>248.00</td><td class="rate">62.00</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>70</td><td>Ground Chakkar Puppy (10 Pce)</td><td>தரைச்சக்கரம் பப்பி (10பீஸ்)</td><td>185.00</td><td class="rate">46.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>72</td><td>Ground Chakkar Asoka (krishna)</td><td>சக்கரம் அசோகா (கிருஷ்ணா)</td><td>282.00</td><td class="rate">70.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>75</td><td>Spinner Mega Deluxe Chakkar (krishna)</td><td>ஸ்பின்னர் மெகா டீலக்ஸ் சக்கரம் (கிருஷ்ணா)</td><td>909.00</td><td class="rate">227.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>77</td><td>Jil Jil Fancy Wheel</td><td>ஜில் ஜில் பேன்சி வீல்</td><td>450.00</td><td class="rate">112.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>78</td><td>Jolly Wheel</td><td>ஜாளி வீல்</td><td>411.00</td><td class="rate">102.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>81</td><td>Flora Wheel</td><td>ஃளோரா வீல்</td><td>776.00</td><td class="rate">194.00</td><td>4 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>83</td><td>Ground Chakkar Asoka (asok)</td><td>தரைச்சக்கரம் அசோகா (அசோக்)</td><td>495.00</td><td class="rate">123.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>84</td><td>Ground Chakkar Deluxe (asok)</td><td>தரைச்சக்கரம் டீலக்ஸ் (அசோக்)</td><td>900.00</td><td class="rate">225.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>85</td><td>Wire Chakkar (asok)</td><td>வயர் சக்கரம் (அசோக்)</td><td>900.00</td><td class="rate">225.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>86</td><td>Tinto Wheel Or Rio Wheel (ayyan)</td><td>டினோ வீல் (அ) ரியோ வீல் (அய்யன்)</td><td>878.00</td><td class="rate">219.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>87</td><td>Lotus Wheel (ayyan)</td><td>லோட்டஸ் வீல் (அய்யன்)</td><td>594.00</td><td class="rate">148.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>88</td><td>Classic Wheel (ayyan)</td><td>கிளாசிக் வீல் (அய்யன்)</td><td>1350.00</td><td class="rate">337.50</td><td>1 Box</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>89</td><td>Ground Chakkar Asoka (sri Vijai Brand)</td><td>சக்கரம் அசோகா (ஸ்ரீ விஜய்)</td><td>248.00</td><td class="rate">62.00</td><td>1 Box</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td colspan="8" class="category-header">FLOWER POTS - பூச்சட்டி</td></tr>
                <tr><td>90</td><td>Flower Pot Small</td><td>பூச்சட்டி சிறியது</td><td>180.00</td><td class="rate">45.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>91</td><td>Flower Pot Big</td><td>பூச்சட்டி பெரியது</td><td>225.00</td><td class="rate">56.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>92</td><td>Flower Pot Special (regular)</td><td>பூச்சட்டி ஸ்பெஷல் சிவப்பு</td><td>293.00</td><td class="rate">73.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>93</td><td>Flower Pot Asoka</td><td>பூச்சட்டி அசோகா</td><td>360.00</td><td class="rate">90.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>94</td><td>Flower Pot Colourkoti</td><td>பூச்சட்டி கலர்கோட்டி</td><td>720.00</td><td class="rate">180.00</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>95</td><td>Flower Pot Deluxe (5pce)</td><td>பூச்சட்டி டீலக்ஸ்</td><td>630.00</td><td class="rate">157.50</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>96</td><td>Flower Pot Super Deluxe (2 Pce)</td><td>பூச்சட்டி சூப்பர் டீலக்ஸ்</td><td>405.00</td><td class="rate">101.25</td><td>2 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>442</td><td>Mega Colourkoti (regular)</td><td>மெகா கலர்கோட்டி</td><td>1485.00</td><td class="rate">371.25</td><td>10 Ppce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>97</td><td>Ganga Jamuna (flower With Bomb)</td><td>கங்கா ஜமுனா (ஃபளவர் ஃபாம்)</td><td>225.00</td><td class="rate">56.25</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>98</td><td>Multicolor Gaint Flowerpot(5pce)(sri Vijai)</td><td>மல்டிகலர் ஜெயிண்ட் பூச்சட்டி (ஸ்ரீவிஜய்)</td><td>675.00</td><td class="rate">168.75</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>100</td><td>Flower Pot Big (asok)</td><td>பூச்சட்டி பிக் (அசோக்)</td><td>495.00</td><td class="rate">123.75</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>101</td><td>Flower Pot Special (asok Brand)</td><td>பூச்சட்டி ஸ்பெஷல் (அசோக்)</td><td>743.00</td><td class="rate">185.75</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>102</td><td>Flower Pot Asoka (asok Brand)</td><td>பூச்சட்டி அசோகா (அசோக்)</td><td>1125.00</td><td class="rate">281.25</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>105</td><td>Flowerpot Colourkoti (asok)</td><td>பூச்சட்டி கலர்கோட்டி (அசோக்)</td><td>1350.00</td><td class="rate">337.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>106</td><td>Flowerpot Colourkoti Deluxe (asok)</td><td>பூச்சட்டி கலர்கோட்டி டீலக்ஸ் (அசோக்)</td><td>2025.00</td><td class="rate">506.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>107</td><td>Flower Pot Asoka (krishna)</td><td>பூச்சட்டி அசோகா (கிருஷ்ணா)</td><td>1125.00</td><td class="rate">281.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>110</td><td>Mega Flower Pot Tricolour Pot</td><td>மெகா பூச்சட்டி ட்ரை கலர்</td><td>2453.00</td><td class="rate">613.25</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>114</td><td>Colour Rain Big Size</td><td>கலர் ரெயின் பெரியது</td><td>1924.00</td><td class="rate">481.00</td><td>2 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>118</td><td>Mega Colourchanging Flowerpot</td><td>மெகா கலர்சேஞ்சிங் பூச்சட்டி</td><td>2858.00</td><td class="rate">714.50</td><td>10 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>119</td><td>Laila Manjunu (flower With Bomb)</td><td>லைலா மஜ்னு (பூ&ஃபாம்)</td><td>405.00</td><td class="rate">101.25</td><td>5 Pce</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <tr><td>569</td><td>Multicolour Gaint (10pce)(sri Vijai)</td><td>மல்டிகலர் ஜெயிண்ட் (ஸ்ரீவிஜய்) 10 பீஸ்</td><td>1350.00</td><td class="rate">337.50</td><td>1 Box(10p)</td><td><input type="number" class="quantity-input" min="0"></td><td><input type="text" class="amount-output" readonly></td></tr>
                <!-- ... All other products from the original document would continue here ... -->
            </tbody>
        </table>
    </div>

    <div class="bottom-controls">
        <div class="total-section">
            <span>GRAND TOTAL: ₹</span>
            <span id="grandTotal">0.00</span>
        </div>
        <div id="submitStatus"></div>
        <button id="submitBtn">Generate PDF & Submit Order</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- CALCULATION LOGIC ---
        const grandTotalElement = document.getElementById('grandTotal');

        const updateGrandTotal = () => {
            let total = 0;
            document.querySelectorAll('.amount-output').forEach(amountInput => {
                const value = parseFloat(amountInput.value);
                if (!isNaN(value)) {
                    total += value;
                }
            });
            grandTotalElement.textContent = total.toFixed(2);
        };

        document.querySelectorAll('.quantity-input').forEach(input => {
            input.addEventListener('input', (event) => {
                const row = event.target.closest('tr');
                const rate = parseFloat(row.querySelector('.rate').textContent);
                const quantity = parseInt(event.target.value, 10);
                const amountOutput = row.querySelector('.amount-output');

                if (!isNaN(rate) && !isNaN(quantity) && quantity >= 0) {
                    amountOutput.value = (rate * quantity).toFixed(2);
                } else {
                    amountOutput.value = '';
                }
                updateGrandTotal();
            });
        });

        // --- PDF AND SUBMISSION LOGIC ---
        const submitBtn = document.getElementById('submitBtn');
        const submitStatus = document.getElementById('submitStatus');
        
        // IMPORTANT: REPLACE THIS URL WITH THE ONE YOU GOT FROM GOOGLE APPS SCRIPT DEPLOYMENT
        const SCRIPT_URL = "YOUR_GOOGLE_APPS_SCRIPT_URL_HERE";

        submitBtn.addEventListener('click', () => {
            const customerName = document.getElementById('name').value;
            const customerPhone = document.getElementById('phone').value;
            
            if (!customerName || !customerPhone) {
                alert("Please fill in at least the Name and Phone Number fields.");
                return;
            }

            if (SCRIPT_URL === "YOUR_GOOGLE_APPS_SCRIPT_URL_HERE") {
                alert("Error: The Google Apps Script URL has not been set in the HTML file.");
                return;
            }

            // --- 1. Collect Data ---
            const orderData = {
                customer: {
                    name: customerName,
                    phone: customerPhone,
                    address: document.getElementById('address').value,
                    refBy: document.getElementById('refBy').value,
                    date: document.getElementById('date').value
                },
                grandTotal: document.getElementById('grandTotal').textContent,
                items: []
            };

            document.querySelectorAll('.product-tbody tr').forEach(row => {
                const quantityInput = row.querySelector('.quantity-input');
                if (quantityInput) {
                    const quantity = parseInt(quantityInput.value, 10);
                    if (!isNaN(quantity) && quantity > 0) {
                        orderData.items.push({
                            sno: row.cells[0].textContent,
                            name: row.cells[1].textContent,
                            rate: parseFloat(row.querySelector('.rate').textContent).toFixed(2),
                            quantity: quantity,
                            amount: parseFloat(row.querySelector('.amount-output').value).toFixed(2)
                        });
                    }
                }
            });

            if (orderData.items.length === 0) {
                alert("Please add at least one item to the order.");
                return;
            }
            
            // Disable button and show status
            submitBtn.disabled = true;
            submitStatus.textContent = "Submitting...";
            submitStatus.style.color = "orange";

            // --- 2. Submit Data to Google Sheet ---
            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Use 'no-cors' for simple requests to Apps Script
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(orderData)
            })
            .then(response => {
                submitStatus.textContent = "Order submitted successfully!";
                submitStatus.style.color = "green";
                // --- 3. Generate PDF ---
                generatePDF(orderData);
            })
            .catch(error => {
                submitStatus.textContent = "Submission failed. Please try again.";
                submitStatus.style.color = "red";
                console.error('Error:', error);
            })
            .finally(() => {
                // Re-enable button after a short delay
                setTimeout(() => {
                    submitBtn.disabled = false;
                }, 2000);
            });
        });
        
        const generatePDF = (orderData) => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // --- PDF Header ---
            doc.setFontSize(20);
            doc.setFont('helvetica', 'bold');
            doc.text("Jithu Crackers", 15, 20);
            
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text("No.50, N S street, Sivakasi.", 15, 27);
            doc.text("Phone No: 9952732777", 15, 32);
            
            // --- Payment Details in Header ---
            const paymentX = 110;
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            doc.text("Payment Details", paymentX, 20);
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.text(`G pay/Phone Pe: 9952732777, 8220693192`, paymentX, 26);
            doc.text(`Bank: State Bank Of India | K Praveenkumar`, paymentX, 31);
            doc.text(`Acc No: 31492853796`, paymentX, 36);
            doc.text(`Branch: Thiruthangal | IFS: SBIN0012767`, paymentX, 41);
            
            doc.setLineWidth(0.5);
            doc.line(10, 48, 200, 48);
            
            // --- Customer Details ---
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text("Order For:", 15, 58);
            doc.setFont('helvetica', 'normal');
            doc.text(`Name: ${orderData.customer.name || 'N/A'}`, 15, 65);
            doc.text(`Address: ${orderData.customer.address || 'N/A'}`, 15, 72);
            doc.text(`Phone: ${orderData.customer.phone || 'N/A'}`, 15, 79);
            
            doc.text(`Date: ${orderData.customer.date || new Date().toLocaleDateString()}`, 140, 65);
            doc.text(`Ref. By: ${orderData.customer.refBy || 'N/A'}`, 140, 72);

            // --- Products Table ---
            const tableData = orderData.items.map(item => [item.sno, item.name, item.rate, item.quantity, item.amount]);
            const tableHeaders = ['S.No.', 'Product Name', 'Rate', 'Qty', 'Amount'];
            
            doc.autoTable({
                head: [tableHeaders],
                body: tableData,
                startY: 88,
                headStyles: { fillColor: [40, 40, 40] },
                styles: { fontSize: 8, cellPadding: 1.5 },
                columnStyles: {
                    0: { cellWidth: 15 },
                    1: { cellWidth: 80 },
                    2: { cellWidth: 20, halign: 'right' },
                    3: { cellWidth: 15, halign: 'center' },
                    4: { cellWidth: 25, halign: 'right' },
                }
            });

            // --- Grand Total ---
            let finalY = doc.lastAutoTable.finalY + 10;
            if (finalY > 280) {
                doc.addPage();
                finalY = 20;
            }
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text(`GRAND TOTAL: Rs. ${orderData.grandTotal}`, doc.internal.pageSize.getWidth() - 15, finalY, { align: 'right' });

            // --- Save PDF ---
            doc.save(`Jithu_Crackers_Order_${orderData.customer.name || 'Guest'}.pdf`);
        };

        // Set default date
        document.getElementById('date').valueAsDate = new Date();
    });
</script>

</body>
</html>
